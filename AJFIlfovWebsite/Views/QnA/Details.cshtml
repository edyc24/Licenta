@model QnA.Models.QuestionModel

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>@ViewData["Title"]</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="~/css/Common/Common.css" />
    <link rel="stylesheet" href="~/css/QnA/Details.css" />
</head>
<body>
    <h2 class="page-title">@Model.Title</h2>

    <div class="question-container">
        <div class="question-content">
            @Model.Content
        </div>

        <div class="answers-section">
            <h3>@Model.Answers.Count Răspuns(uri)</h3>
            <ul>
                @foreach (var answer in Model.Answers)
                {
                    <li class="answer-item">
                        <div class="answer-content">@answer.Content</div>
                        <div class="answer-meta">
                            <p><label>Răspuns de:</label> <strong>@answer.UserName</strong></p>
                            <p><label>Data:</label> <strong>@answer.CreatedAt.ToString("dd MMMM yyyy")</strong></p>
                            <p><label>Insignă:</label> <span class="badge" title="Acest utilizator a câștigat insigna @GetBadge(@answer.UserPoints ?? 0) pentru @answer.UserPoints puncte">@GetBadge(@answer.UserPoints ?? 0)</span></p>
                            <p><label>Puncte:</label> <strong>@answer.UserPoints</strong></p>
                        </div>
                        <div class="vote-buttons">
                            <form method="post" asp-action="UpvoteAnswer">
                                <input type="hidden" name="answerId" value="@answer.Id" />
                                <button type="submit" class="upvote-button">Upvote (@answer.UpVote)</button>
                            </form>
                            <form method="post" asp-action="DownvoteAnswer">
                                <input type="hidden" name="answerId" value="@answer.Id" />
                                <button type="submit" class="downvote-button">Downvote (@answer.DownVote)</button>
                            </form>
                        </div>
                    </li>
                }
            </ul>
        </div>

        <div class="add-answer-section">
            <h3>Răspunsul tău</h3>
            <form method="post" asp-action="AddAnswer">
                <input type="hidden" name="questionId" value="@Model.Id" />
                <textarea name="content" placeholder="Scrie răspunsul tău aici..." required></textarea>
                <button type="submit">Trimite răspunsul</button>
            </form>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>
</body>
</html>

@functions {
    public string GetBadge(int points)
    {
        if (points >= 1000)
            return "Gold";
        else if (points >= 500)
            return "Silver";
        else if (points >= 100)
            return "Bronze";
        else
            return "Newbie";
    }
}